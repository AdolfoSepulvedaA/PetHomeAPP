{% extends 'home.html' %}

{% block title %}Historial de Solicitudes{% endblock %}

{% block content %}
    <h2>Historial de Solicitudes</h2>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Tel√©fono</th>
                <th>RUT</th>
                <th>Estado de Solicitud</th>  <!-- Cambiado para mayor claridad -->
                <th>Estado del Animal</th>     <!-- Nueva columna para el estado del animal -->
                <th>Fecha de Solicitud</th>
            </tr>
        </thead>
        <tbody>
            {% for solicitud in solicitudes %}
                <tr>
                    <td>{{ solicitud.nombre }}</td>
                    <td>{{ solicitud.correo }}</td>
                    <td>{{ solicitud.telefono }}</td>
                    <td>{{ solicitud.rut }}</td>
                    <td>
                        {% if solicitud.estado == 'pendiente' %}
                            <span class="badge bg-warning text-dark">{{ solicitud.estado|title }}</span>
                        {% elif solicitud.estado == 'aceptada' %}
                            <span class="badge bg-success">{{ solicitud.estado|title }}</span>
                        {% else %}
                            <span class="badge bg-danger">{{ solicitud.estado|title }}</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if solicitud.animal.adoptado %}
                            <span class="badge bg-secondary">Adoptado</span>  <!-- Cambiado para reflejar el estado del animal -->
                        {% else %}
                            <span class="badge bg-info">Disponible</span>
                        {% endif %}
                    </td>
                    <td>{{ solicitud.fecha_solicitud|date:"d/m/Y H:i" }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No hay solicitudes disponibles.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
