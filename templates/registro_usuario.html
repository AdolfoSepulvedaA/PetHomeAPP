{% extends 'home.html' %}

{% block title %}Registro de Usuario{% endblock %}

{% block content %}
    <h1>Registro de Usuario</h1>

    <form method="post" class="form">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="form-group">
            <label for="{{ form.rut.id_for_label }}">RUT (sin dígito verificador)</label>
            <input type="text" class="form-control" id="{{ form.rut.id_for_label }}" name="{{ form.rut.name }}" placeholder="Ej: 12345678" value="{{ form.rut.value|default:'' }}" required>
            <small class="form-text text-muted">Ingresa solo números (sin puntos ni guiones).</small>
            {% if form.rut.errors %}
                <div class="text-danger">
                    {{ form.rut.errors.0 }}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.nombre.id_for_label }}">Nombre Completo</label>
            <input type="text" class="form-control" id="{{ form.nombre.id_for_label }}" name="{{ form.nombre.name }}" placeholder="Ej: Juan Pérez" value="{{ form.nombre.value|default:'' }}" required>
            <small class="form-text text-muted">Ingresa tu nombre completo (Ej: Juan Pérez).</small>
            {% if form.nombre.errors %}
                <div class="text-danger">
                    {{ form.nombre.errors.0 }}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.correo.id_for_label }}">Correo Electrónico</label>
            <input type="email" class="form-control" id="{{ form.correo.id_for_label }}" name="{{ form.correo.name }}" placeholder="Ej: juan@example.com" value="{{ form.correo.value|default:'' }}" required>
            <small class="form-text text-muted">Asegúrate de usar un correo electrónico válido.</small>
            {% if form.correo.errors %}
                <div class="text-danger">
                    {{ form.correo.errors.0 }}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.celular.id_for_label }}">Celular</label>
            <input type="text" class="form-control" id="{{ form.celular.id_for_label }}" name="{{ form.celular.name }}" placeholder="Ej: +56912345678" value="{{ form.celular.value|default:'' }}" required>
            <small class="form-text text-muted">Formato: +56912345678.</small>
            {% if form.celular.errors %}
                <div class="text-danger">
                    {{ form.celular.errors.0 }}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.password.id_for_label }}">Contraseña</label>
            <input type="password" class="form-control" id="{{ form.password.id_for_label }}" name="{{ form.password.name }}" placeholder="Ingresa tu contraseña." required>
            <small class="form-text text-muted">La contraseña debe tener al menos 6 caracteres.</small>
        </div>

        <div class="form-group">
            <label for="{{ form.tipo_cuenta.id_for_label }}">Tipo de Cuenta</label>
            <select name="{{ form.tipo_cuenta.name }}" id="{{ form.tipo_cuenta.id_for_label }}" class="form-control" required>
                {% for value, label in form.tipo_cuenta.field.choices %}
                    <option value="{{ value }}"{% if value == form.tipo_cuenta.value %} selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
            {% if form.tipo_cuenta.errors %}
                <div class="text-danger">
                    {{ form.tipo_cuenta.errors.0 }}
                </div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Registrar</button>
    </form>

    <!-- Mostrar mensajes de éxito o error -->
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
{% endblock %}
